tinymce.PluginManager.add("autoresize",function(e){function t(){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}function i(o){var r,s,g,l,m,d,u,h,c,f,y,_,p=tinymce.DOM;if(s=e.getDoc()){if(g=s.body,l=s.documentElement,m=n.autoresize_min_height,!g||o&&"setcontent"===o.type&&o.initial||t())return void(g&&l&&(g.style.overflowY="auto",l.style.overflowY="auto"));u=e.dom.getStyle(g,"margin-top",!0),h=e.dom.getStyle(g,"margin-bottom",!0),c=e.dom.getStyle(g,"padding-top",!0),f=e.dom.getStyle(g,"padding-bottom",!0),y=e.dom.getStyle(g,"border-top-width",!0),_=e.dom.getStyle(g,"border-bottom-width",!0),d=g.offsetHeight+parseInt(u,10)+parseInt(h,10)+parseInt(c,10)+parseInt(f,10)+parseInt(y,10)+parseInt(_,10),(isNaN(d)||d<=0)&&(d=tinymce.Env.ie?g.scrollHeight:tinymce.Env.webkit&&0===g.clientHeight?0:g.offsetHeight),d>n.autoresize_min_height&&(m=d),n.autoresize_max_height&&d>n.autoresize_max_height?(m=n.autoresize_max_height,g.style.overflowY="auto",l.style.overflowY="auto"):(g.style.overflowY="hidden",l.style.overflowY="hidden",g.scrollTop=0),m!==a&&(r=m-a,p.setStyle(e.iframeElement,"height",m+"px"),a=m,tinymce.isWebKit&&r<0&&i(o))}}function o(t,n,a){tinymce.util.Delay.setEditorTimeout(e,function(){i({}),t--?o(t,n,a):a&&a()},n)}var n=e.settings,a=0;e.settings.inline||(n.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),n.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){var t,i;t=e.getParam("autoresize_overflow_padding",1),i=e.getParam("autoresize_bottom_margin",50),!1!==t&&e.dom.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),!1!==i&&e.dom.setStyles(e.getBody(),{paddingBottom:i})}),e.on("nodechange setcontent keyup FullscreenStateChanged",i),e.getParam("autoresize_on_init",!0)&&e.on("init",function(){o(20,100,function(){o(5,1e3)})}),e.addCommand("mceAutoResize",i))});