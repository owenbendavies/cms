!function(){var e={},n=function(n){for(var t=e[n],a=t.deps,o=t.defn,i=a.length,c=new Array(i),u=0;u<i;++u)c[u]=r(a[u]);var l=o.apply(null,c);if(void 0===l)throw"module ["+n+"] returned undefined";t.instance=l},t=function(n,t,r){if("string"!=typeof n)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+n;if(void 0===r)throw"no definition function for "+n;e[n]={deps:t,defn:r,instance:void 0}},r=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},a=function(e,n){for(var t=e.length,a=new Array(t),o=0;o<t;++o)a[o]=r(e[o]);n.apply(null,a)};({}).bolt={module:{api:{define:t,require:a,demand:r}}};var o=t;(function(e,n){o(e,[],function(){return n})})("7",tinymce.util.Tools.resolve),o("1",["7"],function(e){return e("tinymce.Env")}),o("2",["7"],function(e){return e("tinymce.PluginManager")}),o("8",[],function(){return{getSeparatorHtml:function(e){return e.getParam("pagebreak_separator","<!-- pagebreak -->")},shouldSplitBlock:function(e){return e.getParam("pagebreak_split_block",!1)}}}),o("4",["1","8"],function(e,n){var t=function(){return"mce-pagebreak"},r=function(){return'<img src="'+e.transparentSrc+'" class="'+t()+'" data-mce-resize="false" data-mce-placeholder />'};return{setup:function(e){var t=n.getSeparatorHtml(e),a=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");e.on("BeforeSetContent",function(e){e.content=e.content.replace(a,r())}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(r){for(var a,o,i=r.length;i--;)if(a=r[i],o=a.attr("class"),o&&-1!==o.indexOf("mce-pagebreak")){var c=a.parent;if(e.schema.getBlockElements()[c.name]&&n.shouldSplitBlock(e)){c.type=3,c.value=t,c.raw=!0,a.remove();continue}a.type=3,a.value=t,a.raw=!0}})})},getPlaceholderHtml:r,getPageBreakClass:t}}),o("3",["4"],function(e){return{register:function(n){n.addCommand("mcePageBreak",function(){n.settings.pagebreak_split_block?n.insertContent("<p>"+e.getPlaceholderHtml()+"</p>"):n.insertContent(e.getPlaceholderHtml())})}}}),o("5",["4"],function(e){return{setup:function(n){n.on("ResolveName",function(t){"IMG"===t.target.nodeName&&n.dom.hasClass(t.target,e.getPageBreakClass())&&(t.name="pagebreak")})}}}),o("6",[],function(){return{register:function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}}}),o("0",["1","2","3","4","5","6"],function(e,n,t,r,a,o){return n.add("pagebreak",function(e){t.register(e),o.register(e),r.setup(e),a.setup(e)}),function(){}}),r("0")()}();